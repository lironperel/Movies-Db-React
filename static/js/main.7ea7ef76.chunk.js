(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{127:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(26),o=a.n(l),i=(a(67),a(9)),s=a(10),c=a(13),m=a(11),d=a(12),u=(a(69),a(31)),h=a(28),p=a.n(h),v=a(8),f=a(19),b=a.n(f),E=a(133),g=a(30),O=a(29),y=a(134),C=a(128),j=a(132),M=a(129),k=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).handleSubmit=function(e){if(e.preventDefault(),a.formValid(a.state)){var t={Title:a.state.title,Year:a.state.year,Runtime:a.state.runtime,Genre:a.state.genre,Director:a.state.director,Poster:a.state.poster};a.props.add(t.Title,t.Year,t.Runtime,t.Genre,t.Director,t.Poster)}},a.handleChange=function(e){e.preventDefault();var t=e.target,n=t.name,r=t.value,l=a.state.formErrors;switch(n){case"title":l.title=0===r.length?"Please enter movie title":"",l.title=a.props.search("",r)?"Movie with same title already exists":"";break;case"year":l.year=!isFinite(String(r))||parseInt(r,10)<1800||parseInt(r,10)>2099||parseInt(r,10)<=0?"Please enter valid year (after 1800 and before 2099)":"";break;case"runtime":l.runtime=0===r.length?"Please enter movie runtime":"";break;case"genre":l.genre=0===r.length?"Please enter movie genre":"";break;case"director":l.director=0===r.length?"Please enter movie director name":""}a.setState(Object(O.a)({formErrors:l},n,r))},a.formValid=function(e){var t=e.formErrors,n=(e.Poster,Object(g.a)(e,["formErrors","Poster"])),r=!0;return Object.values(t).forEach(function(e){e.length>0&&(r=!1)}),Object.values(n).forEach(function(e,t){""!==t&&null!==t||"poster"===e||(r=!1,a.setState({bottomError:"Please fill all fields (Poster is optional)"}))}),!0===r&&a.setState({bottomError:""}),r},a.state={title:"",year:"",runtime:"",genre:"",director:"",poster:"",formErrors:{title:"",year:"",runtime:"",genre:"",director:""}},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state.formErrors;return r.a.createElement("div",null,r.a.createElement("h4",null,"Add New Movie:"),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("div",{className:"d-flex"},r.a.createElement(y.a,{validationState:e.title.length>0?"error":null},r.a.createElement(C.a,null,"Title:"),r.a.createElement(j.a,{type:"text",name:"title",placeholder:"Movie Title",onChange:this.handleChange,autoComplete:"off"}),e.title.length>0&&r.a.createElement(M.a,{bsClass:"error-message"},e.title)),"\xa0",r.a.createElement(y.a,{validationState:e.year.length>0?"error":null},r.a.createElement(C.a,null,"Year:"),r.a.createElement(j.a,{type:"text",name:"year",placeholder:"Year",onChange:this.handleChange,autoComplete:"off"}),e.year.length>0&&r.a.createElement(M.a,{bsClass:"error-message"},e.year))),r.a.createElement(y.a,{validationState:e.runtime.length>0?"error":null},r.a.createElement(C.a,null,"Runtime:"),r.a.createElement(j.a,{type:"text",name:"runtime",placeholder:"Runtime",onChange:this.handleChange,autoComplete:"off"}),e.runtime.length>0&&r.a.createElement(M.a,{bsClass:"error-message"},e.runtime)),r.a.createElement(y.a,{validationState:e.genre.length>0?"error":null},r.a.createElement(C.a,null,"Genre:"),r.a.createElement(j.a,{type:"text",name:"genre",placeholder:"Genre",onChange:this.handleChange,autoComplete:"off"}),e.genre.length>0&&r.a.createElement(M.a,{bsClass:"error-message"},e.genre)),r.a.createElement(y.a,{validationState:e.director.length>0?"error":null},r.a.createElement(C.a,null,"Director:"),r.a.createElement(j.a,{type:"text",name:"director",placeholder:"Director Name",onChange:this.handleChange,autoComplete:"off"}),e.director.length>0&&r.a.createElement(M.a,{bsClass:"error-message"},e.director)),r.a.createElement(y.a,null,r.a.createElement(C.a,null,"Poster:"),r.a.createElement(j.a,{type:"text",name:"poster",placeholder:"Poster Address (Optional)",onChange:this.handleChange,autoComplete:"off"})),r.a.createElement("br",null),r.a.createElement("div",{className:"right-btn"},r.a.createElement("p",{className:"error-message"},this.state.bottomError),r.a.createElement(E.a,{type:"submit",bsClass:"custom-btn-sm",onClick:this.handleSubmit},"Add Movie"),"\xa0",r.a.createElement(E.a,{bsClass:"custom-btn-sm",onClick:this.props.closeModal},"Cancel"))))}}]),t}(r.a.Component),S={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)"}};b.a.setAppElement("#root");var I=function(e){function t(e,a){var n;return Object(i.a)(this,t),(n=Object(c.a)(this,Object(m.a)(t).call(this,e,a))).handleAdd=function(e,t,a,r,l,o){n.props.add(e,t,a,r,l,o),n.closeModal()},n.state={modalIsOpen:!1},n.openModal=n.openModal.bind(Object(v.a)(Object(v.a)(n))),n.closeModal=n.closeModal.bind(Object(v.a)(Object(v.a)(n))),n.handleAdd=n.handleAdd.bind(Object(v.a)(Object(v.a)(n))),n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"openModal",value:function(){this.setState({modalIsOpen:!0})}},{key:"closeModal",value:function(){this.setState({modalIsOpen:!1})}},{key:"render",value:function(){return r.a.createElement("div",{className:"btn-div"},r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement(E.a,{bsClass:"custom-btn",onClick:this.openModal},"Add New Movie")),r.a.createElement(b.a,{isOpen:this.state.modalIsOpen,onAfterOpen:this.afterOpenModal,onRequestClose:this.closeModal,style:S,contentLabel:"Add Movie"},this.showModal()))}},{key:"showModal",value:function(){if(this.state.modalIsOpen)return r.a.createElement(k,{closeModal:this.closeModal,search:this.props.search,add:this.handleAdd})}}]),t}(r.a.Component),D=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).handleSubmit=function(e){if(e.preventDefault(),a.formValid(a.state)){var t=a.props.movie;t.Title=a.state.title,t.Year=a.state.year,t.Runtime=a.state.runtime,t.Genre=a.state.genre,t.Director=a.state.director;var n=a.props.movie;a.props.edit(n.id,n.Title,n.Year,n.Runtime,n.Genre,n.Director)}else console.error("FORM INVALID!")},a.handleChange=function(e){e.preventDefault();var t=e.target,n=t.name,r=t.value,l=a.state.formErrors;switch(n){case"title":l.title=0===r.length?"Please enter movie title":"",l.title=a.props.search(a.props.movie.id,r)?"Movie with same title already exists":"";break;case"year":l.year=!isFinite(String(r))||parseInt(r,10)<1800||parseInt(r,10)>2099||parseInt(r,10)<=0?"Please enter valid year (after 1800 and before 2099)":"";break;case"runtime":l.runtime=0===r.length?"Please enter movie runtime":"";break;case"genre":l.genre=0===r.length?"Please enter movie genre":"";break;case"director":l.director=0===r.length?"Please enter movie director name":""}a.setState(Object(O.a)({formErrors:l},n,r))},a.formValid=function(e){var t=e.formErrors,n=Object(g.a)(e,["formErrors"]),r=!0;return Object.values(t).forEach(function(e){e.length>0&&(r=!1)}),Object.values(n).forEach(function(e){""!==e&&null!==e||(r=!1,a.setState({bottomError:"Please fill all fields"}))}),!0===r&&a.setState({bottomError:""}),r},a.state={title:a.props.movie.Title,year:a.props.movie.Year,runtime:a.props.movie.Runtime,genre:a.props.movie.Genre,director:a.props.movie.Director,formErrors:{title:"",year:"",runtime:"",genre:"",director:""}},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state.formErrors;return r.a.createElement("div",null,r.a.createElement("h4",null,"Editing: ",this.props.movie.Title),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement(y.a,{validationState:e.title.length>0?"error":null},r.a.createElement(C.a,null,"Title:"),r.a.createElement(j.a,{type:"text",name:"title",placeholder:"Movie Title",value:this.state.title,onChange:this.handleChange,autoComplete:"off"}),e.title.length>0&&r.a.createElement(M.a,{bsClass:"error-message"},e.title)),r.a.createElement(y.a,{validationState:e.year.length>0?"error":null},r.a.createElement(C.a,null,"Year:"),r.a.createElement(j.a,{type:"text",name:"year",placeholder:"Year",value:this.state.year,onChange:this.handleChange,autoComplete:"off"}),e.year.length>0&&r.a.createElement(M.a,{bsClass:"error-message"},e.year)),r.a.createElement(y.a,{validationState:e.runtime.length>0?"error":null},r.a.createElement(C.a,null,"Runtime:"),r.a.createElement(j.a,{type:"text",name:"runtime",placeholder:"Runtime",value:this.state.runtime,onChange:this.handleChange,autoComplete:"off"}),e.runtime.length>0&&r.a.createElement(M.a,{bsClass:"error-message"},e.runtime)),r.a.createElement(y.a,{validationState:e.genre.length>0?"error":null},r.a.createElement(C.a,null,"Genre:"),r.a.createElement(j.a,{type:"text",name:"genre",placeholder:"Genre",value:this.state.genre,onChange:this.handleChange,autoComplete:"off"}),e.genre.length>0&&r.a.createElement(M.a,{bsClass:"error-message"},e.genre)),r.a.createElement(y.a,{validationState:e.director.length>0?"error":null},r.a.createElement(C.a,null,"Director:"),r.a.createElement(j.a,{type:"text",name:"director",placeholder:"Director Name",value:this.state.director,onChange:this.handleChange,autoComplete:"off"}),e.director.length>0&&r.a.createElement(M.a,{bsClass:"error-message"},e.director)),r.a.createElement("br",null),r.a.createElement("div",{className:"right-btn"},r.a.createElement("p",{className:"error-message"},this.state.bottomError),r.a.createElement(E.a,{type:"submit",bsClass:"custom-btn-sm",onClick:this.handleSubmit},"Save"),"\xa0",r.a.createElement(E.a,{bsClass:"custom-btn-sm",onClick:this.props.closeModal},"Cancel"))))}}]),t}(r.a.Component),w={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)"}};b.a.setAppElement("#root");var x=function(e){function t(e,a){var n;return Object(i.a)(this,t),(n=Object(c.a)(this,Object(m.a)(t).call(this,e,a))).handleDelete=function(){n.props.delete(n.props.movie)},n.handleEdit=function(){var e=n.props.movie;n.props.edit(e.id,e.Title,e.Year,e.Runtime,e.Genre,e.Director),n.closeModal()},n.state={modalIsOpen:!1,editIsOpen:!1,deleteIsOpen:!1},n.openEditModal=n.openEditModal.bind(Object(v.a)(Object(v.a)(n))),n.openDeleteModal=n.openDeleteModal.bind(Object(v.a)(Object(v.a)(n))),n.closeModal=n.closeModal.bind(Object(v.a)(Object(v.a)(n))),n.handleEdit=n.handleEdit.bind(Object(v.a)(Object(v.a)(n))),n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"openEditModal",value:function(){this.setState({modalIsOpen:!0,editIsOpen:!0,deleteIsOpen:!1})}},{key:"openDeleteModal",value:function(){this.setState({modalIsOpen:!0,editIsOpen:!1,deleteIsOpen:!0})}},{key:"closeModal",value:function(){this.setState({modalIsOpen:!1,editIsOpen:!1,deleteIsOpen:!1})}},{key:"render",value:function(){return r.a.createElement("div",{className:"btn-div"},r.a.createElement(E.a,{bsClass:"custom-btn-sm",onClick:this.openEditModal},"Edit"),"\xa0",r.a.createElement(E.a,{bsClass:"custom-btn-sm",onClick:this.openDeleteModal},"Delete"),r.a.createElement(b.a,{isOpen:this.state.modalIsOpen,onAfterOpen:this.afterOpenModal,onRequestClose:this.closeModal,style:w,contentLabel:"Edit/Delete Modal"},this.showEditOrDelete()))}},{key:"showEditOrDelete",value:function(){return this.state.editIsOpen?r.a.createElement(D,{movie:this.props.movie,closeModal:this.closeModal,edit:this.handleEdit,search:this.props.search}):this.state.deleteIsOpen?r.a.createElement("div",null,r.a.createElement("p",null,r.a.createElement("b",null,"Delete movie ",this.props.movie.Title)),r.a.createElement("p",null,"Are you sure?"),r.a.createElement("div",{className:"right-btn"},r.a.createElement(E.a,{bsStyle:"primary",bsSize:"small",onClick:this.handleDelete},"Ok"),"\xa0",r.a.createElement(E.a,{bsStyle:"primary",bsSize:"small",onClick:this.closeModal},"Cancel"))):void 0}}]),t}(r.a.Component),N=a(130),P=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).state={movie:a.props.movie},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){if(void 0!==this.props.movie.imdbID){var e="https://www.omdbapi.com/?i="+this.props.movie.imdbID+"&apikey=a161ec7d",t=this.state.movie;p.a.ajax({url:e,success:function(e){t.Runtime=e.Runtime,t.Genre=e.Genre,t.Director=e.Director},error:function(e,t,a){console.error("Failed to fetch data")},complete:function(){this.setState({movie:t})}.bind(this)})}}},{key:"render",value:function(){var e,t,a=(e=function(e){return e.replace(/[^a-zA-Z0-9 ]/g,"")},t=function(e){return e.replace(/\w\S*/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()})},function(a){var n=e(a);return t(n)}),n=this.state.movie,l=a(n.Title);return r.a.createElement("div",{key:n.id,className:"p-2 d-flex movie-item"},r.a.createElement("div",{className:"movie-title"},r.a.createElement(N.a,{src:this.getPoster(),alt:"Poster",width:"80%",thumbnail:!0}),r.a.createElement("p",null,l)),r.a.createElement("div",{className:"movie-details"},r.a.createElement("p",null,r.a.createElement("b",null,"Year: "),n.Year),r.a.createElement("p",null,r.a.createElement("b",null,"Runtime: "),n.Runtime),r.a.createElement("p",null,r.a.createElement("b",null,"Genre: "),n.Genre),r.a.createElement("p",null,r.a.createElement("b",null,"Director: "),n.Director),r.a.createElement("div",{className:"movie-btn text-center"},r.a.createElement(x,{movie:n,delete:this.props.delete,edit:this.props.edit,search:this.props.search}))))}},{key:"getPoster",value:function(){return""===this.state.movie.Poster?"/img/no_img.jpg":this.state.movie.Poster}}]),t}(r.a.Component),R=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).state={movies:[],moviesNextId:0},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){var e=[],t=function(e){return e.length>=1?Math.max.apply(Math,Object(u.a)(e.map(function(e){return e.id})))+1:1};p.a.ajax({url:"https://www.omdbapi.com/?type=movie&r=json&s=Fast&apikey=a161ec7d",success:function(a){"True"===a.Response?a.Search.forEach(function(a){a.id=t(e),e.push(a)}):console.error("Failed to fetch data")},error:function(e,t,a){console.error("Failed to fetch data")},complete:function(a){this.setState({movies:e,moviesNextId:t(e)})}.bind(this)})}},{key:"render",value:function(){var e=this,t=this.state.movies.map(function(t){return r.a.createElement(P,{key:t.id,movie:t,delete:e.deleteMovie.bind(e),edit:e.editMovie.bind(e),search:e.checkIfTitleExists.bind(e)})});return r.a.createElement("div",null,r.a.createElement(I,{add:this.addNewMovie.bind(this),search:this.checkIfTitleExists.bind(this)}),r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement("div",{className:"d-flex justify-content-around flex-wrap"},t)))}},{key:"deleteMovie",value:function(e){var t=this.state.movies.filter(function(t){return t.id!==e.id});this.setState({movies:t})}},{key:"editMovie",value:function(e,t,a,n,r,l){var o=Object(u.a)(this.state.movies),i=o.findIndex(function(t){return t.id===e});o[i].Title=t,o[i].Year=a,o[i].Runtime=n,o[i].Genre=r,o[i].Director=l,this.setState({movies:o})}},{key:"checkIfTitleExists",value:function(e,t){return this.state.movies.filter(function(a){return a.id!==e&&a.Title===t}).length>0}},{key:"addNewMovie",value:function(e,t,a,n,r,l){var o={Title:e,Year:t,Runtime:a,Genre:n,Director:r,Poster:l,id:this.state.moviesNextId},i=Object(u.a)(this.state.movies);i.push(o),this.setState({movies:i,moviesNextId:this.state.moviesNextId+1})}}]),t}(r.a.Component),T=a(131),A=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).state={},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"main-app"},r.a.createElement(T.a,null,r.a.createElement(T.a.Header,null,r.a.createElement(T.a.Brand,null,r.a.createElement(N.a,{src:"/img/logo.png",className:"logo-img"}),r.a.createElement("a",{href:"#home"},"Herolo - Movies DB")))),r.a.createElement(R,null),r.a.createElement("div",{className:"footer"},r.a.createElement("p",null,r.a.createElement("a",{href:"mailto:lironp90@gmail.com"},"\xa9 2018 Liron Perel"))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(A,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},62:function(e,t,a){e.exports=a(127)},67:function(e,t,a){},69:function(e,t,a){}},[[62,2,1]]]);
//# sourceMappingURL=main.7ea7ef76.chunk.js.map